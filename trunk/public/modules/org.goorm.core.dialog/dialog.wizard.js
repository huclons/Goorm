/**
 * Copyright Sung-tae Ryu. All rights reserved.
 * Code licensed under the GPL v2 License:
 * http://www.goorm.org/License
 **/org.goorm.core.dialog.wizard=function(){this.total_step=null,this.step=null,this.panel=null,this.context_menu=null,this.path=null,this.title=null,this.type=null,this.left=null,this.top=null,this.width=null,this.height=null,this.yes=null,this.no=null,this.buttons=null,this.success=null,this.kind=null},org.goorm.core.dialog.wizard.prototype={init:function(e){var t=this;this.step=1,this.title=e.title,this.path=e.path,this.width=e.width,this.height=e.height,this.modal=e.modal,this.buttons=e.buttons,this.success=e.success,this.title=this.title.split(" ").join("_"),this.kind=e.kind,$("#goorm_dialog_container").find("#panelContainer_"+this.title)&&$("#goorm_dialog_container").find("#panelContainer_"+this.title).remove(),$("#goorm_dialog_container").append("<div id='panelContainer_"+this.title+"'></div>");var n=function(){var e=!1;$("#goorm_dialog_container").find("#panelContainer_"+t.title).find(".bd").find(".wizard_step").each(function(n){n==t.step-1&&$(this).find("input[checkField=yes]").each(function(t){$(this).attr("value")==""&&(e=!0)})});if(e)return alert.show(core.module.localization.msg.alertDialogMissing),!1;t.step<t.total_step&&(t.show_previous_button(!0),$("#goorm_dialog_container").find("#panelContainer_"+t.title).find(".bd").find(".wizard_step[step='"+t.step+"']").hide(),$("#goorm_dialog_container").find("#panelContainer_"+t.title).find(".bd").find(".wizard_step[step='"+t.step+"']")&&(t.step++,$("#goorm_dialog_container").find("#panelContainer_"+t.title).find(".bd").find(".wizard_step[step='"+t.step+"']").show(),t.step==t.total_step&&t.show_next_button(!1)))},r=function(){1<t.step&&(t.show_next_button(!0),$("#goorm_dialog_container").find("#panelContainer_"+t.title).find(".bd").find(".wizard_step[step='"+t.step+"']").hide(),t.step--,t.step==1&&t.show_previous_button(!1),$("#goorm_dialog_container").find("#panelContainer_"+t.title).find(".bd").find(".wizard_step[step='"+t.step+"']").show())};this.buttons.unshift({text:"Next",handler:n}),this.buttons.unshift({text:"Previous",handler:r}),this.panel=new YAHOO.widget.Dialog("panelContainer_"+this.title,{width:t.width+"px",height:t.height+"px",visible:!1,underlay:"none",close:!0,autofillheight:"body",draggable:!0,constraintoviewport:!0,modal:t.modal,fixedcenter:!0,effect:{effect:YAHOO.widget.ContainerEffect.FADE,duration:.2},buttons:this.buttons}),this.panel.setHeader(this.title.split("_").join(" ")),this.panel.setBody("Loading Data..."),this.panel.render(),$(document).bind("keydown","esc",function(){confirmation.panel==undefined&&(confirmation.panel={},confirmation.panel.cfg={},confirmation.panel.cfg.config={},confirmation.panel.cfg.config.visible={},confirmation.panel.cfg.config.visible.value=!1),t.buttons&&t.panel.cfg.config.visible.value&&!core.status.keydown&&!alert.panel.cfg.config.visible.value&&!notice.panel.cfg.config.visible.value&&!confirmation.panel.cfg.config.visible.value&&$(t.buttons).each(function(e){this.text=="Cancel"&&(this.hide=function(){},this.handler(),core.status.keydown=!0,t.panel.hide())})}),$(document).bind("keydown","return",function(e){confirmation.panel==undefined&&(confirmation.panel={},confirmation.panel.cfg={},confirmation.panel.cfg.config={},confirmation.panel.cfg.config.visible={},confirmation.panel.cfg.config.visible.value=!1),t.buttons&&t.panel.cfg.config.visible.value&&!core.status.keydown&&!alert.panel.cfg.config.visible.value&&!notice.panel.cfg.config.visible.value&&!confirmation.panel.cfg.config.visible.value&&$(t.buttons).each(function(e){this.isDefault&&(this.hide=function(){},this.handler(),core.status.keydown=!0)})});var i="file/get_contents";return $.ajax({url:i,type:"GET",data:"path=public/"+t.path,success:function(e){t.panel.setBody(e),typeof t.success=="function"&&t.success(),core.dialog.loaded_count++,core.dialog.loaded_count==Object.keys(core.dialog).length-1,$(core).trigger("goorm_loading")}}),t.show_previous_button(!1),this},show_previous_button:function(e){var t=this;e?t.panel._aButtons[0].set("disabled",!1):t.panel._aButtons[0].set("disabled",!0)},show_next_button:function(e){var t=this;e?t.panel._aButtons[1].set("disabled",!1):t.panel._aButtons[1].set("disabled",!0)},showFirstPage:function(){var e=this;e.step=1,$("#goorm_dialog_container").find("#panelContainer_"+e.title).find(".bd").find(".wizard_step").each(function(e){$(this).hide(),e==0&&$(this).show()}),e.show_previous_button(!1),e.show_next_button(!0)}};