/**
 * Copyright Sung-tae Ryu. All rights reserved.
 * Code licensed under the GPL v2 License:
 * http://www.goorm.org/License
 **/org.goorm.core.layout=function(){this.layout=null,this.inner_layout=null,this.left_tabview=null,this.inner_right_tabview=null,this.inner_bottom_tabview=null,this.inner_center_tabview=null,this.table_properties=null,this.treeview_project=null,this.mainmenu=null,this.toolbar=null,this.workspace=null,this.startpage=null,this.window_manager=null,this.communication=null,this.console=null,this.tab_project=null,this.tab_toolbox=null},org.goorm.core.layout.prototype={init:function(e){var t=this,n=250,r=350,i=200;parseInt(localStorage.layout_left_width)>0&&(n=parseInt(localStorage.layout_left_width)),parseInt(localStorage.layout_right_width)>0&&(r=parseInt(localStorage.layout_right_width)),parseInt(localStorage.layout_bottom_height)>0&&(i=parseInt(localStorage.layout_bottom_height)),this.layout=new YAHOO.widget.Layout({units:[{position:"top",height:62,maxHeight:150,body:e+"_top",scroll:null,zIndex:2,gutter:"0px 0px 0px 0px"},{position:"left",width:n,body:e+"_left",animate:!1,scroll:!1,zIndex:1,resize:!0,gutter:"0px 0px 0px 0px",collapse:!0,minWidth:200},{position:"center",body:e+"_center_inner_layout",scroll:!1},{position:"bottom",height:30,body:e+"_bottom",scroll:!1,gutter:"0px 0px 0px 0px"}]}),this.layout.on("render",function(){t.attach_mainmenu(e+"_mainmenu"),t.attach_toolbar(e+"_main_toolbar");var n=t.layout.getUnitByPosition("center").get("wrap");t.inner_layout=new YAHOO.widget.Layout(n,{parent:t.layout,units:[{position:"right",width:r,resize:!0,scroll:!1,body:e+"_inner_layout_right",animate:!1,gutter:"0px 0px 0px 0px",collapse:!0},{position:"bottom",height:i,body:e+"_inner_layout_bottom",animate:!1,scroll:!1,resize:!0,gutter:"0px 0px 0px 0px",collapse:!0},{position:"center",body:e+"_inner_layout_center",scroll:!1}]}),t.inner_layout.on("render",function(){t.layout.getUnitByPosition("left").on("endResize",function(){localStorage.layout_left_width=core.module.layout.layout._units.left._configs.width.value}),t.layout.getUnitByPosition("left").on("beforeCollapse",function(){localStorage.layout_left_width=core.module.layout.layout._units.left._configs.width.value}),t.layout.getUnitByPosition("left").on("collapse",function(){localStorage.layout_left_collapse=!0}),t.layout.getUnitByPosition("left").on("expand",function(){localStorage.layout_left_collapse=!1}),t.inner_layout.getUnitByPosition("right").on("endResize",function(){localStorage.layout_right_width=core.module.layout.inner_layout._units.right._configs.width.value}),t.inner_layout.getUnitByPosition("right").on("beforeCollapse",function(){localStorage.layout_right_width=core.module.layout.inner_layout._units.right._configs.width.value}),t.inner_layout.getUnitByPosition("right").on("collapse",function(){localStorage.layout_right_collapse=!0}),t.inner_layout.getUnitByPosition("right").on("expand",function(){localStorage.layout_right_collapse=!1}),t.inner_layout.getUnitByPosition("bottom").on("endResize",function(){localStorage.layout_bottom_height=core.module.layout.inner_layout._units.bottom._configs.height.value}),t.inner_layout.getUnitByPosition("bottom").on("beforeCollapse",function(){localStorage.layout_bottom_height=core.module.layout.inner_layout._units.bottom._configs.height.value}),t.inner_layout.getUnitByPosition("bottom").on("collapse",function(){localStorage.layout_bottom_collapse=!0}),t.inner_layout.getUnitByPosition("bottom").on("expand",function(){localStorage.layout_bottom_collapse=!1}),t.inner_layout.getUnitByPosition("center").on("resize",t.resize_all),$(core).trigger("layout_loaded")}),t.inner_layout.on("start_resize",function(){$(".dummyspace").css("z-index",999)}),t.inner_layout.render(),localStorage["layout_left_collapse"]=="true"&&t.layout.getUnitByPosition("left").collapse(),localStorage["layout_right_collapse"]=="true"&&t.inner_layout.getUnitByPosition("right").collapse(),localStorage["layout_bottom_collapse"]=="true"&&t.inner_layout.getUnitByPosition("bottom").collapse()}),this.left_tabview=new YAHOO.widget.TabView(e+"_left"),this.attach_project_explorer(this.left_tabview),this.attach_toolbox(this.left_tabview),this.inner_right_tabview=new YAHOO.widget.TabView(e+"_inner_layout_right"),this.attach_properties(this.inner_right_tabview),this.attach_object_explorer(this.inner_right_tabview),this.attach_communication(this.inner_right_tabview),this.attach_slide(this.inner_right_tabview),this.inner_bottom_tabview=new YAHOO.widget.TabView(e+"_inner_layout_bottom"),this.attach_message(this.inner_bottom_tabview),this.attach_debug(this.inner_bottom_tabview),this.attach_terminal(this.inner_bottom_tabview),this.attach_search(this.inner_bottom_tabview),this.workspace=new org.goorm.core.layout.workspace,this.workspace.init(e+"_inner_layout_center"),this.layout.render(),$(window).resize(function(){t.resize_all(),t.layout.getUnitByPosition("top").set("height",$("#goorm_mainmenu").height()+$("#goorm_main_toolbar").height()+7),$(core).trigger("layout_resized")})},attach_mainmenu:function(e){this.mainmenu=new YAHOO.widget.MenuBar(e,{autosubmenudisplay:!1,hidedelay:750,lazyload:!0,effect:{effect:YAHOO.widget.ContainerEffect.FADE,duration:.15}}),this.mainmenu.render()},attach_project_explorer:function(e){var t=this;this.tab_project=new YAHOO.widget.Tab({label:"Project",content:"<div id='project_explorer' class='directory_treeview'></div>"}),e.addTab(this.tab_project),this.project_explorer=new org.goorm.core.project.explorer,this.project_explorer.init()},detach_project_explorer:function(){this.left_tabview.removeTab(this.tab_project),delete this},attach_toolbox:function(e){var t=this;this.tab_toolbox=new YAHOO.widget.Tab({label:"Tool Box",content:"<div id='toolbox'></div>"}),e.addTab(this.tab_toolbox)},detach_toolbox:function(){this.left_tabview.removeTab(this.tab_toolbox),delete this},attach_object_explorer:function(e){e.addTab(new YAHOO.widget.Tab({label:"Object",content:"<div id='object_explorer'><div id='object_tree'></div></div>"}))},attach_properties:function(e){e.addTab(new YAHOO.widget.Tab({label:"Properties",content:"<div id='properties'></div>"}));var t=new org.goorm.core.object.properties;this.table_properties=t.init("properties")},attach_message:function(e){e.addTab(new YAHOO.widget.Tab({label:"Message",content:"<div id='message'></div>"}))},attach_toolbar:function(e){var t=new org.goorm.core.menu.context;t.init("configs/menu/org.goorm.core.toolbar/toolbar.html","menu.context.toolbar",e),$(core).trigger("context_menu_complete")},attach_debug:function(e){e.addTab(new YAHOO.widget.Tab({label:"Debug",content:"<div id='debug'></div>"})),this.debug=new org.goorm.core.debug,this.debug.init(),core.module.debug=this.debug},attach_communication:function(e){e.addTab(new YAHOO.widget.Tab({label:"Communication",content:"<div id='communication' class='layout_right_communication_tab'></div>"})),this.communication=new org.goorm.core.collaboration.communication,this.communication.init("communication")},show_communication:function(e){$(".layout_right_communication_tab").parent("div").attr("id",e),this.communication.init(e)},attach_facebook:function(e){e.addTab(new YAHOO.widget.Tab({label:"Facebook",content:"<div id='slide' class='layout_right_facebook_tab'><iframe src='http://www.facebook.com/pages' width='100%' height='100%' style='border:none; margin:none; padding:none;'/></div>"}))},attach_slide:function(e){e.addTab(new YAHOO.widget.Tab({label:"Slide",content:"<div id='slide' class='layout_right_slide_tab'>Slide URL <input id='slide_url' type='text' value='http://www.slideshare.net/rohitbhargava/rohit-bhargava-invite-me-to-speak'/><button id='slideshare_presentation'>Presentation</button> <button id='slide_prev'>prev</button> <button id='slide_next'>next</button><iframe name='slideshare' src='http://localhost:9999/lib/slideshare/slide.html' width=100% height='90%' frameborder=0 marginwidth=0 marginheight=0 scrolling=no allowfullscreen> </iframe></div>"})),this.slideshare=new org.goorm.core.collaboration.slideshare,this.slideshare.init()},attach_terminal:function(e){e.addTab(new YAHOO.widget.Tab({label:"Terminal",content:"<div id='terminal' width='100%'></div>"})),this.terminal=new org.goorm.core.terminal,this.terminal.init($("#terminal"),"default_terminal",!1)},attach_search:function(e){e.addTab(new YAHOO.widget.Tab({label:"Search",content:"<div id='search' width='100%'></div>"}))},refresh_terminal:function(){},resize_all:function(){var e=$(".yui-layout-unit-left").find(".yui-layout-wrap").height()-22;$("#goorm_left").find(".yui-content").height(e),$("#goorm_left").find("#project_explorer").height(e-6),$("#goorm_left").find("#project_treeview").height(e-35);var t=$(".yui-layout-unit-left").find(".yui-layout-wrap").find("#project_selector").width();$("#goorm_left").find("#project_selectbox").width(t-19),$("#goorm_left").find("#project_selectbox").next().width(t-10),$("#goorm_left").find("#toolbox_selectbox").width(t-19),$("#goorm_left").find("#toolbox_selectbox").next().width(t-10);var n=$(".yui-layout-unit-right").find(".yui-layout-wrap").height()-25;$("#goorm_inner_layout_right").find(".yui-content").height(n);var r=$(".yui-layout-unit-bottom").find(".yui-layout-wrap").height()-26;$("#goorm_inner_layout_bottom").find(".yui-content").height(r);var i=$("#workspace").parent().parent().height();$("#goorm_inner_layout_center").find("#workspace").height(i),$(".dummyspace").css("z-index",0),$(core).trigger("layout_resized")}};