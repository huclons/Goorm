var fs=require("fs"),walk=require("walk"),emitter,common=require(__path+"plugins/org.goorm.plugin.web/modules/common.js");module.exports={run:function(e,t){var n=__path+"workspace/"+e.data.project_path,r=common.run_path+e.data.project_path,i=r.split("temp_files").pop();console.log("runProject "+i),fs.existsSync(__path+"temp_files")||fs.mkdirSync(__path+"temp_files"),fs.existsSync(__path+"temp_files/plugins")||fs.mkdirSync(__path+"temp_files/plugins"),fs.existsSync(__path+"temp_files/plugins/web")||fs.mkdirSync(__path+"temp_files/plugins/web"),fs.existsSync(r)||fs.mkdirSync(r),emittor=walk.walk(n),emittor.on("file",function(e,t,i){var s=(e+"/"+t.name).replace(n,"");fs.readFile(e+"/"+t.name,"utf-8",function(e,t){if(e)throw e;fs.writeFile(r+s,t,function(e){if(e)throw e})}),i()}),emittor.on("directory",function(e,t,i){var s=(e+"/"+t.name).replace(n,"");fs.exists(r+s,function(e){e||fs.mkdirSync(r+s),i()}),i()}),emittor.on("end",function(){t.emit("do_run_complete",{code:200,message:"success",run_path:i})})}};