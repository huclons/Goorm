//스키마
var schema={id:String,auth_type:String,pw:String,name:String,nick:String,email:String,email_chk:Boolean,level:Number,point:Number,deleted:Boolean,extra:String},Member=mongoose.model("member",new Schema(schema));module.exports={add:function(e,t){var n=new Member;for(var r in schema)n[r]=e[r];n.deleted=!1,n.save(function(e){e?(console.log(e,"dao.member : Member add failed"),t(!1)):t(!0)})},get:function(e,t){Member.findOne({id:e},function(e,n){if(n){var r={};for(var i in schema)r[i]=n[i];t(r)}else t(!1)})},get_by_nick:function(e,t){Member.findOne({nick:e},function(e,n){if(n){var r={};for(var i in schema)r[i]=n[i];t(r)}else t(!1)})},remove:function(e,t){console.log(e),Member.update({id:{$in:e}},{$set:{deleted:!0}},{multi:!0},function(e){e?(console.log("member_dao : Member Removing [fail]"),t(!1)):t(!0)})},set:function(e,t,n){var r={};for(var i in t)r[i]=t[i],r[i]=="false"&&(r[i]=!1),r[i]=="true"&&(r[i]=!0);console.log(r),Member.update({id:e},{$set:r},null,function(e){e?(console.log("member_dao : Member updating [fail]",e),n(!1)):(console.log("member_dao : Member updating [success]"),n(!0))})},get_list:function(e){Member.find({deleted:!1},function(t,n){t?e(null):e(n)})}};