/**
 * Copyright Sung-tae Ryu. All rights reserved.
 * Code licensed under the GPL v2 License:
 * http://www.goorm.org/License
 **/org.goorm.plugin.manager=function(){this.plugins=null,this.list=0,this.interval=null,this.preference=null,this.toolbox_selector=null},org.goorm.plugin.manager.prototype={init:function(){this.plugins=new Object,this.list=[]},get:function(){var self=this,url="plugin/get_list";$.ajax({url:url,type:"GET",async:!1,success:function(data){self.list=eval(data),$(core).trigger("plugin_loaded")}})},load:function(index){var self=this;if(index==this.list.length&&this.list.length!=0)return $("#toolbox_selectbox").prepend("<option value='all'>ALL</option>"),!1;if(this.list.length!=0){index==0&&($("#toolbox").html("<div id='toolbox_selector'></div>"),$("#toolbox_selector").append("<select id='toolbox_selectbox' name='toolbox_selectbox' style='width:100%;'></select>"),$("#toolbox_selector").change(function(){$("#"+$("#toolbox_selector option:selected").val()+"_toolset").show()}));var plugin_name=this.list[index].name;plugin_name!=undefined&&($.getScript("/"+plugin_name+"/plug.js",function(){eval("self.plugins['"+plugin_name+"'] = new "+plugin_name+"();"),self.plugins[plugin_name].init(),index++,self.load(index),$(core).trigger("goorm_loading")}),core.module.preference.load_preference("/"+plugin_name+"/preference.json"))}},new_project:function(e){e.project_type!="goorm"&&$.isFunction(this.plugins["org.goorm.plugin."+e.project_type].new_project)&&this.plugins["org.goorm.plugin."+e.project_type].new_project(e)}};