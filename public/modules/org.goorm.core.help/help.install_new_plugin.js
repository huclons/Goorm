/**
 * Copyright Sung-tae Ryu. All rights reserved.
 * Code licensed under the GPL v2 License:
 * http://www.goorm.org/License
 **/org.goorm.core.help.install_new_plugin=function(){this.dialog=null,this.buttons=null,this.tabview=null,this.treeview=null,this.num=0},org.goorm.core.help.install_new_plugin.prototype={init:function(){var e=this,t=function(){this.hide()},n=function(){this.hide()};this.buttons=[{text:"OK",handler:t,isDefault:!0},{text:"Cancel",handler:n}],this.dialog=new org.goorm.core.help.install_new_plugin.dialog,this.dialog.init({title:"Install New Plugins",path:"configs/dialogs/org.goorm.core.help/help.install_new_plugin.html",width:600,height:400,modal:!0,yes_text:"OK",no_text:"Close",buttons:this.buttons,success:function(){e.plugins_add_button=new YAHOO.widget.Button("plugins_add_button"),e.select_all=new YAHOO.widget.Button("select_all"),e.deselect_all=new YAHOO.widget.Button("deselect_all"),e.install_new_plugin=new YAHOO.widget.Button("install_new_plugin"),$("#div_install_new_plugins #install_new_plugin").click(function(){core.module.loading_bar.start("Install new plugins..."),e.num=0,$("#div_install_new_list input:checkbox:checked").each(function(){e.num++}),$("#div_install_new_list input:checkbox:checked").each(function(){var t=$(this).val();setTimeout(function(){e.install_plugin(t)},10)})}),$("#div_install_new_plugins #select_all").click(function(){$("#div_install_new_list input:checkbox").each(function(){$(this).attr("checked","checked")})}),$("#div_install_new_plugins #deselect_all").click(function(){$("#div_install_new_list input:checkbox").each(function(){$(this).attr("checked","")})}),$("#div_install_new_plugins #selectbox").change(function(){var e=null,t=$(this).val();t!=""&&(core.module.loading_bar.start("Loading, Please wait..."),$.ajax({type:"get",data:"path="+t,url:"file/get_url_contents",success:function(t){e=$.parseXML(t),$("#div_install_new_list").html(""),$(e).find("xml").each(function(){$(this).find("plugin").each(function(){$("#div_install_new_list").append('<input type="checkbox" name="'+$(this).attr("name")+'" value="'+$(this).attr("url")+'"> '+$(this).attr("name")+"<br>")})}),core.module.loading_bar.stop()},error:function(e,t,n){}}))})}}),this.dialog=this.dialog.dialog},show:function(){var e=this;this.dialog.panel.show()},install_plugin:function(e){var t=this,n=e;$.ajax({url:"plugin/install",type:"get",data:"path="+n,success:function(e){t.num--,t.num==0&&(alert.init({title:"Install new plugins",message:e,image_url:""}),alert.panel.show(),core.module.loading_bar.stop())},error:function(e,t,n){alert.show(core.module.localization.msg.alertError+n)}})}};